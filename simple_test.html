<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Video Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .test-item {
            background: #333;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .test-video {
            width: 100%;
            height: 300px;
            background: #000;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        .test-button {
            background: #4ecdc4;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }
        .log {
            background: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Simple Video Streaming Test</h1>
        
        <div class="test-item">
            <h3>Test 1: Simple Video Stream</h3>
            <video class="test-video" id="testVideo1" controls>
                <source src="simple_video_test.php?file=Magical Rainforest.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div>
                <button class="test-button" onclick="testVideo1()">Test Video 1</button>
                <button class="test-button" onclick="checkVideo1()">Check Status</button>
            </div>
        </div>
        
        <div class="test-item">
            <h3>Test 2: XAMPP Video Stream</h3>
            <video class="test-video" id="testVideo2" controls>
                <source src="video_xampp.php?file=Magical Rainforest.mp4&dirIndex=0" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div>
                <button class="test-button" onclick="testVideo2()">Test Video 2</button>
                <button class="test-button" onclick="checkVideo2()">Check Status</button>
            </div>
        </div>
        
        <div class="test-item">
            <h3>Test 3: Direct File Access</h3>
            <video class="test-video" id="testVideo3" controls>
                <source src="videos/Magical Rainforest.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div>
                <button class="test-button" onclick="testVideo3()">Test Video 3</button>
                <button class="test-button" onclick="checkVideo3()">Check Status</button>
            </div>
        </div>
        
        <div class="test-item">
            <h3>Test Log</h3>
            <div id="log" class="log"></div>
        </div>
    </div>

    <script>
        const log = document.getElementById('log');
        
        function logMessage(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.innerHTML = `[${timestamp}] ${message}`;
            logEntry.style.color = type === 'error' ? '#ff6b6b' : type === 'success' ? '#51cf66' : '#74c0fc';
            log.appendChild(logEntry);
            log.scrollTop = log.scrollHeight;
        }
        
        function testVideo1() {
            const video = document.getElementById('testVideo1');
            logMessage('Testing Video 1 (simple_video_test.php)...', 'info');
            video.load();
            video.play().then(() => {
                logMessage('Video 1 play() succeeded!', 'success');
            }).catch((err) => {
                logMessage(`Video 1 play() failed: ${err.name} - ${err.message}`, 'error');
            });
        }
        
        function testVideo2() {
            const video = document.getElementById('testVideo2');
            logMessage('Testing Video 2 (video_xampp.php)...', 'info');
            video.load();
            video.play().then(() => {
                logMessage('Video 2 play() succeeded!', 'success');
            }).catch((err) => {
                logMessage(`Video 2 play() failed: ${err.name} - ${err.message}`, 'error');
            });
        }
        
        function testVideo3() {
            const video = document.getElementById('testVideo3');
            logMessage('Testing Video 3 (direct file access)...', 'info');
            video.load();
            video.play().then(() => {
                logMessage('Video 3 play() succeeded!', 'success');
            }).catch((err) => {
                logMessage(`Video 3 play() failed: ${err.name} - ${err.message}`, 'error');
            });
        }
        
        function checkVideo1() {
            const video = document.getElementById('testVideo1');
            logMessage(`Video 1 Status - readyState: ${video.readyState}, networkState: ${video.networkState}, src: ${video.src}`, 'info');
        }
        
        function checkVideo2() {
            const video = document.getElementById('testVideo2');
            logMessage(`Video 2 Status - readyState: ${video.readyState}, networkState: ${video.networkState}, src: ${video.src}`, 'info');
        }
        
        function checkVideo3() {
            const video = document.getElementById('testVideo3');
            logMessage(`Video 3 Status - readyState: ${video.readyState}, networkState: ${video.networkState}, src: ${video.src}`, 'info');
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            logMessage('Simple video test page loaded');
            logMessage('Testing three different video sources to isolate the issue');
        });
    </script>
</body>
</html>
